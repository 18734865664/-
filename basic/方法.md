 ### 面向对象编程(OOP)

一个对象其实也就是一个简单的值或者一个变量，在这个对象中会包含一些方法，而一个方法则是一个一个和特殊类型关联的函数，一个面向对象的程序会用方法来表达其属性和对应的操作，这样使用这个对象的用户就不需要直接去操作对象，而是借助方法来做这些事情

#### 选择器
实例化对象调用方法 p.Distance() 这种表达式叫做选择器

	这种选择器会选择合适的对应对象的方法

go语言中面向对象基于struct类型，绑定struct类型的方法和struct中的字段在同一命名空间，所以字段和方法不能重名，编译会报错，调用时会有歧义

每种类型都有其方法的命名空间，同名的Distance方法，不同对象调用时指向对应的方法

go语言中，函数和方法的区别是指有没有接收器，而不是有没有返回值



#### 方法
在go语言中，方法可以被声明到任何变量，只要不是一个指针或者一个interface

	系统内置类型不能绑定方法，要绑定方法可以起一个别名，使用不同的命名空间
    
#### 基于指针对象的方法
好处：
1. 调用函数时节省栈区初始化空间（每次调用函数，需要将对象传入）
2. 

隐式转换：

    go语言提供了隐式的转换
	变量类型对象 ---》 指针类型
	如果接收器p是一个Point类型的变量，并且其方法需要一个Point指针作为接收器，编译器会隐式的将对象转换为&p 进行方法调用，这种隐式变量的前提条件是，传入的对象必须声明为一个变量，不能是匿名对象调用
    
    指针类型 ---》 变量类型
    接收器形参是类型T，接收器实参是*T类型，编译器会隐式的取变量的地址
    
简明点说

1. 不管method的receiver是指针类型还是非指针类型，都是可以通过指针/非指针类型进行调用的，编译器会进行类型转换
2. 在声明一个method的receiver该是指针还是非指针类型时，需要考虑两方面：
	1. 这个对象本身是不是特别大，如果声明为非指针类型变量时，调用会产生一次拷贝（值传递）
	2. 如果用指针类型作为receiver，需要注意该类型指向的始终是一块内存地址，调用时传递的是该内存地址，指向同一块对象区域（引用传递）
    
    
    
匿名对象

    方法接收者的是对象本身，使用匿名对象可以调用
    方法接收者是指针变量，不能使用匿名对象调用，因为匿名对象的内存地址不能获取，无法调用
    
    
####  Nil也是一个合法的接收器类型

	map/slice允许nil指针作为参数，理论上也可以用来做方法的接收器
    定义方法允许接收nil时，最好注明含义
    
    
#### 通过嵌入结构体来扩展类型
内嵌可以使定义字段特别多的复杂类型时，先按关联性定义一部分小类型分组，之后再组合起来。

	一个结构体中，可以通过匿名字段的形式内嵌其他结构体
    不可以内嵌结构体本身，因为初始化的时候会出现循环初始化的问题
    也可以内嵌其他机构体的指针类型，调用时，通过该指针指向的对象获取对应的字段和方法
    可以内嵌结构体本身的指针类型（比如链表结构）
    
    结构体不能形成循环引用，报错：invalid recursive type
    
    go语言中，内嵌字段会指导编译器去生成额外的包装方法调用匿名字段带入的方法
    

执行顺序：
    
    当编译器解析一个选择器到方法时，首先在本结构体直接绑定的方法，如果没有，则在内嵌字段引入的方法中寻找，依此迭代
    


### 方法值和方法表达式

oop中编程中，使用p.Distance() 可以调用绑定p对象的方法Distance，这个表达式其实可以分为两步
1. f:= p.Distance，p.Distance    这个叫做选择器，选择器会返回一个方法值，这个方法值将方法（Point.Distance）绑定到特定接收器变量
2. 通过接收器变量可以直接调用方法，只要传入对应的参数

使用场景：
 
    time.Afterfunc() 异步调用函数，需要传入一个方法，一定时间后调用，此时使用方法值进行传递，代码更简洁
    
![func_value1.PNG](.\image\func_value1.PNG)

定义方法类型

	定义方法类型的时候，绑定的struct作为第一个参数传入，而且不能是指针类型参数（指针类型绑定的方法无法定义类型）,猜测是go编译器的隐式转换在搞鬼，报错信息显示，即使绑定的是指针类型对象，定义type时显示的也是对象变量类型。
   
![func_value3.png](.\image\func_value3.png)

正确的代码：
![func_value2.PNG](.\image\func_value2.PNG)



### Bit数组

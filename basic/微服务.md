# 微服务（microservices）

> 著名的“2 pizza团队”：亚马逊CEO提出，单个服务的设计/开发/测试/运维人员加起来只需要两个pizza，
>
> 每个服务都作为单独程序开发运行，服务之间通过API进行通信，服务可以使用不同的开发语言和组件
>
> 可能将复用性强的代码抽出来作为公共库使用
>
> 分而治之，合而用之
>
> 整体式架构和微服务架构
>
> 1. 整体式架构
>
>    1. 复杂性逐渐变高
>    2. 技术债务逐渐上升
>    3. 维护成本大
>    4. 持续交付周期长
>    5. 可扩展性差
>
> 2. 微服务架构
>
>    1. 单一职责
>    2. 轻量级通信
>    3. 独立性
>    4. 运维要求高
>    5. 分布式的复杂性
>    6. 接口调整成本高
>    7. 重复劳动
>    8. 开发简单
>    9. 快速响应需求变化
>    10. 随时随地更新
>    11. 系统更加稳定可靠
>

## 1. protoBuf

> 通用的三种数据交互形式：
>
> 1. json
>    1. 一般用于web项目
> 2. protobuf
>    1. 以二进制的形式交互，比json和xml体积小，适合传输
>    2. 使用前必须先定义proto文件
>    3. 是一种可扩展的序列化数据结构
>    4. 序列化/反序列化快，比json要快
>    5. 支持跨平台，多语言
>    6. 向后兼容性好，升级不影响已部署的程序
>    7. 因为简单，所以无法表示复杂的概念
> 3. xml
>    1. webservice中应用较多，较冗余
>
> 通信形式与语言/平台无关，通常基于HTTP，让服务之的通信变得标准化/无状态话
>
> REST(Representational State Transfer)
>
> 1. 
>
> REST指一组架构约束条件和原则，满足这些条件和原则的应用程序或设计就是RESTful

### 1.1 优缺点

> 1. 简单



## 2 micro

### 3.1 服务类型

> 分为三类：
>
> 1. srv: 标准的RPC服务，属于后端服务，在micro的设计理念中这部分永远不会向外开放
> 2. api：提供HTTP到RPC的转换服务，API网关默认情况下会将请求转发给它
> 3. web: micro认为web也可以当作为服务来创建
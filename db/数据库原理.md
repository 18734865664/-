### 数据库原理
#### 简述
1. 使用文件保存数据：
	1. 由于文件之间相互独立，因而不能反映现实世界中事物之间的联系
	2. 数据长期保存
	3. 有文件系统管理数据
	4. 共享性差，数据冗余大
	5. 数据独立性差

2. 数据库阶段
	1. 五部分
		1. 数据库
		2. 数据库管理系统
		3. 数据库管理员
		4. 硬件平台
		5. 软件平台
3. 数据模型
	1. 描述数据与数据之间的联系，数据的语义、数据一致性约束的概念性工具的集合。
	2. 三部分：
		1. 数据结构
		2. 数据操作
		3. 完整性约束
	3. 常见数据模型
		1. 层次数据模型
		2. 网状数据模型
		3. 关系数据模型
			1. 以二维表描述数据
			2. 术语：
				1. 关系：一个二维表就是一个关系
				2. 元组：二维表中的一行
				3. 属性：二维表中的列
				4. 域：每个属性的变化范围

#### 五范式
1. 第一范式
	1. 数据表中的字段都是单一的，不可再分
	2. 数据表中不能有重复的行
	3. 数据表中每个元组的属性数量都是一样的
2. 第二范式
	1. 数据表中的每个元组必须可以被唯一的区分
	2. 若区分标识属性（主键）是组合关键字（多字段共同决定），则其他非关键字段完全依赖于主关键字整体，不能只部份依赖于主关键字段的部分
3. 第三范式
	1. 非关键字段，只能由关键字段唯一区分，不能有其他字段可以唯一区分非关键字字段
	2. 解决传递依赖
4. 第四范式
	1. 数据表中的一个字段，不能包含一个属性的两个或多个互相独立的多值因子，如：一个电话属性，包含了多个电话号，这不符合第四范式
5. 第五范式
	1. 必须可以分解为更小的表,除非那些表在逻辑上拥有与原始表相同的主键
	
#### 外键
1. 一个表A中的foreign key指向另一个表B中的主键
	1. 表B中主键成为表A的外键，表A称为主表，表B成为从表
2. 外键的作用
	1. 保证数据的完整性和一致性
	2. 能够增加ER图的可读性
3. 使用外键条件
	1. 两个表必须是innodb数据引擎
	2. 使用外键关系的域必须是索引型
	3. 使用外键关系的域必须与数据类型相似
	4. 外键的名字不能重复
	5. 对已经存在的字段设为外键，必须保证字段中的数据与父表中主键数据对应起来

4. 三种约束模式
	1. district： 严格模式
		1. 父表不能删除或更新一个被子表引用的记录
		2. foreign key(fk_id) references tb1(id) on delete no action on update no action

	2. cascade：级联模式
		1. 父表操作后，子表关联数据跟着一起操作
		2. foreign key(f_id) references tb1(id) on delete cascade on update cascade
		
	3. set null：置空模式
		1. 前提是外键字段允许置空
		2. 父表操作后，子表对应字段被置空
		3. foreign key(f_id) references tb1(id) on delete set null on update set null